# apiVersion: karpenter.sh/v1
# kind: NodePool
# metadata:
#   name: default
#   annotations:
#     argocd.argoproj.io/sync-wave: "20"
# spec:
#   template:
#     metadata:
#       labels:
#         node-type: default
#     spec:
#       nodeClassRef:
#         group: karpenter.k8s.aws
#         kind: EC2NodeClass
#         name: al2023
#       expireAfter: 720h # 30 * 24h = 720h
#       requirements:
#         - key: "karpenter.k8s.aws/instance-category"
#           operator: In
#           values: ["c", "m", "r"]
#         - key: "karpenter.k8s.aws/instance-cpu"
#           operator: In
#           values: ["4", "8", "16", "32"]
#         - key: "karpenter.k8s.aws/instance-hypervisor"
#           operator: In
#           values: ["nitro"]
#         - key: "karpenter.k8s.aws/instance-generation"
#           operator: Gt
#           values: ["2"]
#   limits:
#     cpu: 1000
#   disruption:
#     consolidationPolicy: WhenEmptyOrUnderutilized
#     consolidateAfter: 5m
